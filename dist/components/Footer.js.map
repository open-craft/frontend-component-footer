{"version":3,"sources":["../../src/components/Footer.jsx"],"names":["React","useContext","useEffect","useState","PropTypes","injectIntl","intlShape","sendTrackEvent","ensureConfig","getConfig","AppContext","getFooterBranding","FooterLink","FooterLinks","messages","LanguageSelector","EVENT_NAMES","FOOTER_LINK","getLocalePrefix","locale","twoLetterPrefix","substring","toLowerCase","externalLinkClickHandler","event","label","currentTarget","getAttribute","eventName","properties","category","SiteFooter","props","supportedLanguages","onLanguageSelected","logo","intl","showLanguageSelector","length","config","footerConfig","setFooterConfig","fetchFooter","branding","data","navigation_links","social_links","SITE_NAME","legal_links","formatMessage","propTypes","isRequired","string","func","arrayOf","shape","value","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { injectIntl, intlShape } from '@edx/frontend-platform/i18n';\nimport { sendTrackEvent } from '@edx/frontend-platform/analytics';\nimport { ensureConfig, getConfig } from '@edx/frontend-platform/config';\nimport { AppContext } from '@edx/frontend-platform/react';\nimport { getFooterBranding } from '../data/api';\nimport FooterLink from './FooterLink';\nimport FooterLinks from './FooterLinks';\n\nimport messages from './Footer.messages';\nimport LanguageSelector from './LanguageSelector';\n\nensureConfig(['LOGO_TRADEMARK_URL'], 'Footer component');\n\nconst EVENT_NAMES = {\n  FOOTER_LINK: 'edx.bi.footer.link',\n};\n\nfunction getLocalePrefix(locale) {\n  const twoLetterPrefix = locale.substring(0, 2).toLowerCase();\n  if (twoLetterPrefix === 'en') {\n    return '';\n  }\n  return `/${twoLetterPrefix}`;\n}\n\nfunction externalLinkClickHandler(event) {\n  const label = event.currentTarget.getAttribute('href');\n  const eventName = EVENT_NAMES.FOOTER_LINK;\n  const properties = {\n    category: 'outbound_link',\n    label,\n  };\n  sendTrackEvent(eventName, properties);\n}\n\nfunction SiteFooter(props) {\n  const { supportedLanguages, onLanguageSelected, logo, intl } = props;\n  const showLanguageSelector =\n    supportedLanguages.length > 0 && onLanguageSelected;\n  const { config } = useContext(AppContext);\n  const [footerConfig, setFooterConfig] = useState(null);\n\n  async function fetchFooter() {\n    const branding = await getFooterBranding();\n    setFooterConfig(branding.data);\n  }\n  useEffect(() => {\n    fetchFooter();\n  }, []);\n\n  if (footerConfig === null) {\n    return null;\n  }\n\n  return (\n    <footer role=\"contentinfo\" className=\"footer border-top pt-5 py-3 px-4\">\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"navigation-links col-lg-6 col-sm-12\">\n            <FooterLinks\n              links={footerConfig.navigation_links}\n              spacer={<span className=\"px-3\" />}\n            />\n          </div>\n          <div className=\"social-links col-lg-6 col-sm-12\">\n            <FooterLinks\n              links={footerConfig.social_links}\n              spacer={<span className=\"px-3\" />}\n            />\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"legal-links offset-lg-6 col-lg-6 col-sm-12\">\n            <span>\n              {'\\u00a9'} {getConfig().SITE_NAME}\n            </span>\n            <span className=\"px-2\">|</span>\n\n            <span>All rights reserved</span>\n            <span className=\"px-2\">|</span>\n            <FooterLinks\n              links={footerConfig.legal_links}\n              spacer={<span className=\"px-2\">|</span>}\n            />\n          </div>\n        </div>\n\n        <div className=\"footer-separator\"></div>\n\n        <div className=\"row theme-copyright\">\n          <div className=\"col-lg-6 col-sm-12 copyright-section\">\n            <div className=\"footer-logo opencraft-logo\" />\n            <span className=\"copyright-text\">\n              {intl.formatMessage(messages['footer.themeLicense'])}\n              <br />\n              {intl.formatMessage(messages['footer.themeCopyright'])}\n            </span>\n          </div>\n          <div className=\"col-lg-6 col-sm-12 copyright-section\">\n            <div className=\"footer-logo edx-logo\" />\n            <span className=\"copyright-text\">\n              {intl.formatMessage(messages['footer.edxCopyright'])}\n            </span>\n          </div>\n        </div>\n        {showLanguageSelector && (\n          <LanguageSelector\n            options={supportedLanguages}\n            onSubmit={onLanguageSelected}\n          />\n        )}\n      </div>\n    </footer>\n  );\n}\n\nSiteFooter.propTypes = {\n  intl: intlShape.isRequired,\n  logo: PropTypes.string,\n  onLanguageSelected: PropTypes.func,\n  supportedLanguages: PropTypes.arrayOf(\n    PropTypes.shape({\n      label: PropTypes.string.isRequired,\n      value: PropTypes.string.isRequired,\n    })\n  ),\n};\n\nSiteFooter.defaultProps = {\n  logo: undefined,\n  onLanguageSelected: undefined,\n  supportedLanguages: [],\n};\n\nexport default injectIntl(SiteFooter);\nexport { EVENT_NAMES };\n"],"file":"Footer.js"}